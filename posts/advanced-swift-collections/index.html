<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="《Swift进阶》阅读笔记 - 集合类型" /><meta name="author" content="dirtmelon" /><meta property="og:locale" content="en_US" /><meta name="description" content="数组 高阶函数" /><meta property="og:description" content="数组 高阶函数" /><link rel="canonical" href="https://dirtmelon.github.io/posts/advanced-swift-collections/" /><meta property="og:url" content="https://dirtmelon.github.io/posts/advanced-swift-collections/" /><meta property="og:site_name" content="Dirtmelon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-03-13T22:03:06+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="《Swift进阶》阅读笔记 - 集合类型" /><meta name="twitter:site" content="@Dirt_melon" /><meta name="twitter:creator" content="@dirtmelon" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"dirtmelon"},"description":"数组 高阶函数","url":"https://dirtmelon.github.io/posts/advanced-swift-collections/","headline":"《Swift进阶》阅读笔记 - 集合类型","dateModified":"2017-03-13T22:03:06+08:00","datePublished":"2017-03-13T22:03:06+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://dirtmelon.github.io/posts/advanced-swift-collections/"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title>《Swift进阶》阅读笔记 - 集合类型 | Dirtmelon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dirtmelon"><meta name="application-name" content="Dirtmelon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/favicons/apple-icon.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dirtmelon</a></div><div class="site-subtitle font-italic">Dirtmelon's blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/dirtmelon" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/Dirt_melon" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['0xffdirtmelon','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>《Swift进阶》阅读笔记 - 集合类型</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>《Swift进阶》阅读笔记 - 集合类型</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> dirtmelon </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 13, 2017, 10:03 PM +0800" prep="on" > Mar 13, 2017 <i class="unloaded">2017-03-13T22:03:06+08:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2129 words">11 min</span></div></div><div class="post-content"><h2 id="数组">数组</h2><h3 id="高阶函数">高阶函数</h3><p>实现map函数，把for循环中的代码模版部分用一个泛型函数封装起来。下面是可能的实现方式：</p><pre><code class="language-Swift">extension Array {
	  func map&lt;T&gt;(_ transform: (Element) -&gt; T) -&gt; [T] {
        var result: [T] = []
        result.reserveCapacity(count)
        for x in self {
		      result.append(transform(x))
        }
        return result
     }
}
</code></pre><p>注：如果明确知道数组的大小，可以调用reserveCapacity(_:)方法，避免在添加元素过程中重复申请内存。<a href="https://developer.apple.com/reference/swift/array/1538966-reservecapacity">array-reservecapacity</a></p><ul><li>map和flatMap —— 如何对元素进行变换</ul><pre><code class="language-Swift">let numbers = [1, 2, 3, 4, 5]
let squareMapNumbers = numbers.map { $0 * 2}
print(squareMapNumbers) //[2, 4, 6, 8, 10]
let squareFlatMapNumbers = numbers.flatMap { $0 * 2}
print(squareFlatMapNumbers) //[2, 4, 6, 8, 10]
</code></pre><p>可以看到map跟flatMap的结果是相同的，那么map跟flatMap的不同之处在哪呢，当对二维数组进行操作时就可以看出不同了：</p><pre><code class="language-Swift">let numbersCompound = [[1,2,3],[4,5,6]];
let mapCompound = numbersCompound.map { $0.map{ $0 + 2 } }
print(mapCompound) // [[2, 4, 6], [8, 10, 12]]
let flatMapCompound = numbersCompound.flatMap { $0.map { $0 + 2 } }
print(flatMapCompound) // [2, 4, 6, 8, 10, 12]
</code></pre><p>可以看到二维数组经过<code class="language-plaintext highlighter-rouge">map</code>转换还是二维数组，而经过<code class="language-plaintext highlighter-rouge">flatMap</code>转换后被拍扁了，变成了一维数组。</p><p>当数组中含有nil时，flatMap也会把nil去掉。</p><pre><code class="language-Swift">let string = ["ab", "cc", nil, "dd"]
let flatMapString = string.flatMap { $0 }
print(flatMapString) // ["ab", "cc", "dd"]
// 用filter和map组合实现flatMap过滤nil值的效果
let mapString = string.filter { $0 != nil}.map { $0!}
print(mapString) // ["ab", "cc", "dd"]
</code></pre><p>flatMap还可以用于将不同数组里的元素进行配对。</p><pre><code class="language-Swift">let chineseNumbers = ["😢", "😊", "😓", "🐶", "🐱"]
let result = numbers.flatMap { number in
	chineseNumbers.map { chineseNumber in
		(number, chineseNumber)
	}
}
print(result) // [(1, "😢"), (1, "😊"), (1, "😓"), (1, "🐶"), (1, "🐱"), (2, "😢"), (2, "😊"), (2, "😓"), (2, "🐶"), (2, "🐱"), (3, "😢"), (3, "😊"), (3, "😓"), (3, "🐶"), (3, "🐱"), (4, "😢"), (4, "😊"), (4, "😓"), (4, "🐶"), (4, "🐱"), (5, "😢"), (5, "😊"), (5, "😓"), (5, "🐶"), (5, "🐱")]
</code></pre><p>详细的说明可以看这篇文章<a href="http://swiftcafe.io/2016/03/28/about-map/">谈谈 Swift 中的 map 和 flatMap</a></p><ul><li>filter —— 元素是否应该被包含在结果中</ul><pre><code class="language-Swift">let filterNumbers = [1, 2, 3, 4, 5]
let filteredNumbers = filterNumbers.filter { $0 &gt; 3 }
print(filteredNumbers) //prints [4, 5]
</code></pre><ul><li>reduce —— 如何将元素合并到一个总和的值中</ul><pre><code class="language-Swift">let reduceNumbers = [1, 2, 3, 4 ,5]
let reducedNumber = reduceNumbers.reduce(0) { $0 + $1 }
print(reducedNumber) //prints 15
</code></pre><ul><li>sequence —— 序列中下一个元素应该是什么<li>forEach —— 对于一个元素，应该执行怎样的操作，需要注意的是forEach中的return语句不会终止循环，仅仅是从闭包中返回而已。<li>sort，lexicographicCompare和partition —— 两个元素应该以怎样的顺序进行排列<li>index，first 和 contains — 元素是否符合某个条件<li>min 和 max — 两个元素中的最小/最大值是哪个<li>elementsEqual 和 starts — 两个元素是否相等<li>split — 这个元素是否是一个分割符</ul><pre><code class="language-Swift">let name = "Firts Lase"
let nameArray = name.characters.split { $0 == " " }.map(String.init)
print(nameArray) // ["Firts", "Lase"]
</code></pre><h3 id="切片">切片</h3><p>Array中允许通过指定下标范围来获取某一段的值：</p><pre><code class="language-Swift">let slice = numbers[1..&lt;numbers.endIndex]
print(slice) // [2, 3, 4, 5]
</code></pre><p>slice的类型为ArraySlice。需要注意的是slice与numbers一开始是共用存储空间的。在上述例子中如果企图访问slice[0]编译器是会报错的，显示越界访问。</p><h2 id="字典">字典</h2><p>字典中通过键获取值所花费的评价时间是常数量级的。数组中搜寻一个特定元素所花的时间与数组尺寸成正比的。</p><h3 id="可变性">可变性</h3><p>字典可以通过下表修改和删除对应的值。如果需要删除某个值的话，将下标对应的值设为nil即可。如果需要返回删除的值可以调用<code class="language-plaintext highlighter-rouge">removeValue(forKey:)</code>。更新操作也是，如果需要返回更新前的值，则可以调用<code class="language-plaintext highlighter-rouge">updateValue(_:forKey:)</code></p><h3 id="有用的字典扩展">有用的字典扩展</h3><ul><li>合并，用来合并的字典可以覆盖重复的值。</ul><pre><code class="language-Swift">extension Dictionary {
    mutating func merge&lt;S&gt;(_ other: S)
        where S: Sequence, S.Iterator.Element == (key: Key, value: Value) {
        for (k, v) in other {
            self[k] = v
        }
    }
}
</code></pre><p>必须是序列，以进行循环枚举，必须是key-value的形式。这样只要是key-value的形式都可以进行合并，不一定是字典。</p><ul><li>使用一个key-value的序列来创建字典</ul><pre><code class="language-Swift">extension Dictionary {
    init&lt;S: Sequence&gt;(_ sequence: S)
         where S.Iterator.Element == (key: Key, value: Value) {
         self = [:]
         self.merge(sequence)
    }
}
</code></pre><ul><li>对字典中的值进行映射</ul><pre><code class="language-Swift">extension Dictionary {
    func mapValues&lt;NewValue&gt;(transform: (Value) -&gt; NewValue)
        -&gt; [Key:NewValue] {
        return Dictionary&lt;Key, NewValue&gt;(map { (key, value) in
            return (key, transform(value))
        })
    }
}
</code></pre><h2 id="set">Set</h2><p>集合Set是一组无序的元素，每个元素只会出现一次。测试集合中是否包含某个元素是一个常数时间的操作。</p><p>可以在一个集合中求另一个集合的补集，也可以求两个集合的交集，也可以求两个集合的并集。</p><h2 id="集合类型协议">集合类型协议</h2><h3 id="序列">序列</h3><p>Sequence协议是集合类型结构中的基础。一个序列代表一系列具有相同类型的值，你可以对这些值进行迭代。</p><p>Sequence协议：</p><pre><code class="language-Swift">protocol Sequence {
    associatedtype Iterator: IteratorProtocol
    func makeIterator() -&gt; Iterator
}
</code></pre><p>Sequence还有另外一个关联类型，叫做SubSequence：</p><pre><code class="language-Swift">protocol Sequence {
    associatedtype Iterator: IteratorProtocol
    associatedtype SubSequence
}
</code></pre><p>在返回原序列的切片操作中，SubSequence被用作返回值的字类型：</p><ul><li>prefix和suffix——获取开头或者结尾n个元素<li>dropFirst和dropLast——返回移除掉前n个或后n个元素的字序列<li>split——将一个序列在指定的分隔元素时截断，返回子序列的数组</ul><h3 id="迭代器">迭代器</h3><p>IteratorProtocol协议中唯一的一个方法是next()，这个方法在每次调用时返回序列中的下一个值。当序列耗尽时返回nil：</p><pre><code class="language-Swift">protocol IteratorProtocol {
	  associatedtype Element
	  mutating func next() -&gt; Element?
}
</code></pre><h3 id="集合类型">集合类型</h3><p>集合类型指的是稳定的序列，它们能够被多次遍历且保持一致。Collection协议是建立在Sequence 协议上的。在Sequence协议的基础上，Collection还提供了比如count属性的新能力。</p><pre><code class="language-Swift">protocol Collection: Indexable, Sequence {
    /// 一个表示集合中位置的类型
	  associatedtype Index: Comparable
    /// 一个非空集合首个元素的位置
    var startIndex: Index { get }
    /// 集合中超过末位的位置，也就是比最后一个有效下标值大1的位置
    var endIndex: Index { get }
	  /// 返回在给定索引之后的那个索引值
	  func index(after i: Index) -&gt; Index
    /// 访问特定位置的元素
    subscript(position: Index) -&gt; Element { get }
}
</code></pre><p>遵守ExpressibleByArrayLiteral协议</p><p>遵守ExpressibleByArrayLiteral协议则可以以 [value1, value2, etc] 的方式创建一个队列：</p><pre><code class="language-Swift">extension FIFOQueue: ExpressibleByArrayLiteral {
    public init(arrayLiteral elements: Element...) {
        self.init(left: elements.reversed(), right: [])
    }
}
</code></pre><h2 id="索引">索引</h2><p>每个集合都有两个特殊的索引，startIndex和endIndex。startIndex指定集合中第一个元素，endIndex是集合中最后一个元素之后的位置。endIndex并不是一个有效的下标索引。集合类型的Index必须实现Comparable。<a href="https://developer.apple.com/reference/swift/comparable">Comparable协议</a></p><h3 id="索引失效">索引失效</h3><p>失效有两层含义：</p><ol><li>索引本身有效，但是已经指向另外一个元素<li>索引本身已经无效，通过它来访问集合会造成崩溃</ol><h3 id="链表">链表</h3><pre><code class="language-Swift">/// 一个简单的链表枚举
enum List&lt;Element&gt; {
	  case end
	  indirect case node(Element, next: List&lt;Element&gt;)
}
</code></pre><p>indirect关键字允许一个枚举成员能够持有引用。</p><pre><code class="language-Swift">extension List {
    /// 在链表前方添加一个值为`x`的节点，并返回这个链表
    func cons(_ x: Element) -&gt; List {
        return .node(x, next: self)
    }
}
let list = List&lt;Int&gt;.end.cons(1).cons(2).cons(3)
print(list) // node(3, List&lt;Swift.Int&gt;.node(2, List&lt;Swift.Int&gt;.node(1, List&lt;Swift.Int&gt;.end)))
</code></pre><p>同样也可以添加ExpressibleByArrayLiteral协议。</p><pre><code class="language-Swift">extension List: ExpressibleByArrayLiteral {
	init(arrayLiteral elements: Element...) {
		// 逆序操作，从根节点开始初始化
		self = elements.reversed().reduce(.end) { partialList, element in
			partialList.cons(element)
		}
	}
}
let list2: List = [3, 2, 1]
print(list2) // node(3, List&lt;Swift.Int&gt;.node(2, List&lt;Swift.Int&gt;.node(1, List&lt;Swift.Int&gt;.end)))
</code></pre><h3 id="栈">栈</h3><p>定义一个通用的栈的协议：</p><pre><code class="language-Swift">/// 一个进栈和出栈都是常数时间操作的后进先出（LIFO）栈
protocol Stack {
	/// 栈中存储的元素的类型
	associatedtype Element
	/// 将`x`入栈到`self`作为栈顶元素
	/// - 复杂度：O(1)
	mutating func push(_ x: Element)
	
	/// 从`self`移除栈顶元素，并返回它
	/// 如果`self`是空，返回`nil`
	/// - 复杂度：O(1)
	mutating func pop() -&gt; Element?
}
</code></pre><p>为List添加Stack协议：</p><pre><code class="language-Swift">extension List: Stack {
	
	mutating func push(_ x: Element) {
		self = self.cons(x)
	}
	
	mutating func pop() -&gt; Element? {
		switch self {
		case .end:
			return nil
		case let .node(x, next:xs):
			self = xs
			return x
		}
	}
}
</code></pre><p>为List添加IteratorProtocol和Sequence协议，只需要添加next()方法：</p><pre><code class="language-Swift">extension List: IteratorProtocol, Sequence {
	mutating func next() -&gt; Element? {
		return pop()
	}
}
</code></pre></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/code/'>Code</a>, <a href='/categories/swift/'>Swift</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/swift/" class="post-tag no-text-decoration" >Swift</a> <a href="/tags/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="post-tag no-text-decoration" >阅读笔记</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=《Swift进阶》阅读笔记 - 集合类型 - Dirtmelon&url=https://dirtmelon.github.io/posts/advanced-swift-collections/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=《Swift进阶》阅读笔记 - 集合类型 - Dirtmelon&u=https://dirtmelon.github.io/posts/advanced-swift-collections/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=《Swift进阶》阅读笔记 - 集合类型 - Dirtmelon&url=https://dirtmelon.github.io/posts/advanced-swift-collections/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/iglistkit-first/">IGListKit - 开篇</a><li><a href="/posts/iglistkit-second/">IGListKit 的基石 - IGListSectionController</a><li><a href="/posts/iglistkit-third/">IGListKit 的管理者 - IGListAdapter</a><li><a href="/posts/cocoapods-sync-githooks/">一种使用 CocoaPods 同步 Git hooks 的方案</a><li><a href="/posts/cocoapods-first/">CocoaPods 学习记录 - 官方文档</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">阅读笔记</a> <a class="post-tag" href="/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a> <a class="post-tag" href="/tags/swift/">Swift</a> <a class="post-tag" href="/tags/%E7%BF%BB%E8%AF%91/">翻译</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/texture/">Texture</a> <a class="post-tag" href="/tags/cocoapods/">CocoaPods</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/advanced-swift-optional/"><div class="card-body"> <span class="timeago small" > Mar 14, 2017 <i class="unloaded">2017-03-14T23:45:17+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>《Swift进阶》阅读笔记 - 可选值</h3><div class="text-muted small"><p> 哨岗值 当返回一个“魔法数”来表示函数没有返回真实的值，这样的值称为“哨岗值”。哨岗值很容易产生问题，因为可能忘记检查哨岗值，并且不小心使用了它们。 通过枚举解决魔法数的问题 enum Optional&lt;Wrapped&gt; { case none case some(wrapped) } 获取关联值的唯一方法是使用 switch 或者 if case 语句...</p></div></div></a></div><div class="card"> <a href="/posts/Swift-and-Pointer/"><div class="card-body"> <span class="timeago small" > May 18, 2020 <i class="unloaded">2020-05-18T21:27:24+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Swift 与指针</h3><div class="text-muted small"><p> 为什么使用指针 Swift 是一门非常安全的语言，强类型，Optinal 都是为了提高安全性所引入的，当我们对一个值为 nil 的 Optional 进行强制解包时就会触发崩溃，这是为了安全而触发的崩溃，可以防止程序有预期之外的行为。如果这里不崩溃，可能导致后续程序行为不可预期。 大多数情况下，我们在使用 Swift 时都不需要使用指针，但是在某些情况下我们不可避免地需要使用指针相关 AP...</p></div></div></a></div><div class="card"> <a href="/posts/Optional-between-Swift-and-Objective-C/"><div class="card-body"> <span class="timeago small" > Jul 13, 2020 <i class="unloaded">2020-07-13T23:33:20+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Swift 与 Objective-C 互操作中的 Optional</h3><div class="text-muted small"><p> 参考 Optionals in Swift Objective-C Interoperability 本文基于 Swift 5.3 和 Xcode 12.0 beta 2 编写，不排除将来可能有变化。 nonnull 为了与 Swift 的 Optional 类型交互， Objective-C 提供了 nullable ， nonnull 等关键字，用于表示某个属性是否有可能为 n...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/why-use-rxswift/" class="btn btn-outline-primary" prompt="Older"><p>为什么使用 RxSwift</p></a> <a href="/posts/advanced-swift-optional/" class="btn btn-outline-primary" prompt="Newer"><p>《Swift进阶》阅读笔记 - 可选值</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//dirtmelon-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = '《Swift进阶》阅读笔记 - 集合类型'; this.page.url = 'https://dirtmelon.github.io/posts/advanced-swift-collections/'; this.page.identifier = '/posts/advanced-swift-collections/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/Dirt_melon">dirtmelon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">阅读笔记</a> <a class="post-tag" href="/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a> <a class="post-tag" href="/tags/swift/">Swift</a> <a class="post-tag" href="/tags/%E7%BF%BB%E8%AF%91/">翻译</a> <a class="post-tag" href="/tags/summary/">summary</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/texture/">Texture</a> <a class="post-tag" href="/tags/cocoapods/">CocoaPods</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dirtmelon.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script async src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GZ7JRH6MFN"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GZ7JRH6MFN'); }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script>
